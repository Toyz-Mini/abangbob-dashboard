{
  "meta": {
    "project": "AbangBob Dashboard",
    "date": "2025-12-10",
    "prepared_by": "Software Development Manager"
  },
  "product_overview": "AbangBob Dashboard is a centralized, progressive web app platform tailored for food and beverage businesses in Brunei, integrating operational management modules such as POS, inventory, HR, finance, delivery, and marketing into a single unified system with offline-first capabilities and localization for Brunei standards.",
  "core_goals": [
    "Provide a unified platform for all essential F&B business operations including sales, inventory, human resources, finance, and delivery management.",
    "Ensure compliance with Bruneian statutory requirements such as TAP and SCP contributions and support BND currency.",
    "Offer an offline-first progressive web app experience with local storage for persistence without backend dependency.",
    "Support bilingual interface in English and Bahasa Melayu for broader accessibility.",
    "Deliver mobile-responsive and tablet-optimized user experiences for ease of use in operational environments.",
    "Enable detailed analytics, reporting, and audit logging for business insight and security.",
    "Implement role-based access control and secure authentication tailored to operational roles."
  ],
  "key_features": [
    "Comprehensive Dashboard showing real-time sales, order statuses, inventory alerts, staff attendance, and trend charts.",
    "Robust POS System with menu browsing, cart management, modifier selections, discounts, order queues, and receipt printing.",
    "Full Menu Management with CRUD operations on items, categories, modifiers, and pricing controls.",
    "Kitchen Display System for real-time order preparation status tracking with timers and notifications.",
    "Inventory Management featuring stock tracking, minimum stock alerts, adjustment logging, and supplier integration.",
    "Human Resources Module with staff profiles, PIN-based clock-in/out, KPI scoring and leaderboard, payroll generation with Brunei statutory deductions, shift scheduling, and leave/claim approval workflows.",
    "Employee Self-Service Staff Portal for schedules, checklists with photo proofs, leave requests, claims, training, payslip views, and profile management.",
    "Multi-platform Delivery Hub aggregating orders from popular services with kanban board, notifications, and slip printing.",
    "Finance Module with expense tracking, cash flow management, categorized expenses, and profit & loss reporting.",
    "Customer CRM with loyalty points, segmentation, order history, and birthday tracking.",
    "Promotions Module supporting various discount schemes with usage and time restrictions.",
    "Production Module tracking fryer oil usage, cycles, change dates, and waste.",
    "Recipes and Supplier Management with costing and order workflows.",
    "Advanced Analytics dashboards for business intelligence and performance insights.",
    "Notification Center for managing alerts and announcements.",
    "System Settings including receipt design, business info, language and theme preferences.",
    "Support for internationalization with English and Bahasa Melayu languages.",
    "Progressive Web App capabilities with offline support, service workers, and installability.",
    "WhatsApp integration for messaging receipts, notifications, alerts, and summaries.",
    "Export services generating PDF and Excel reports for orders, inventory, attendance, and expenses."
  ],
  "user_flow_summary": [
    "User logs in via PIN-based authentication with role-based access control determining interface views.",
    "Managers access Dashboard for real-time business overview and navigate to modules such as HR, Inventory, Finance, and Approvals.",
    "Staff use the Staff Portal to view schedules, submit leave and claims, complete checklists, and view payslips.",
    "Point of Sale operators select menu items, configure modifiers, apply discounts, enter customer info with phone validation, and process orders generating receipts and updating order queue status.",
    "Kitchen staff view real-time orders on the Kitchen Display System updating statuses through stages from pending to completed with timers and audio alerts.",
    "Inventory managers perform stock adjustments with reason logging, monitor low stock alerts, and associate stock with suppliers.",
    "HR managers manage staff profiles, track attendance via PIN and photo, score KPIs, generate payroll reports complying with Brunei regulations, and approve leave and claims.",
    "Delivery staff manage aggregated delivery orders from multiple platforms via a kanban-style board and print delivery slips.",
    "Finance staff track daily expenses, manage cash flow, and generate profit & loss statements.",
    "Marketing teams create and manage customer profiles, loyalty programs, and promotions with restrictions and usage limits.",
    "System admins configure settings such as language, theme, receipts, and business info, and monitor audit logs and notifications."
  ],
  "validation_criteria": [
    "Dashboards accurately display real-time sales, inventory, staff attendance, and alerts with no stale data.",
    "POS order processing correctly validates modifiers, discounts (0-20%), phone number formats, and order types with accurate receipt generation.",
    "Menu management allows seamless CRUD operations with modifier groups enforcing required and optional selections and price adjustments.",
    "Attendance clock-in/out functions correctly with PIN and photo verification; KPI scoring reflects accurate metrics and leaderboard rankings.",
    "Inventory updates correctly reflect stock quantities, adjustment reasons are logged, and alerts trigger when minimum quantities reach thresholds.",
    "Delivery orders from supported platforms appear correctly on the kanban board with status updates and audio notifications triggered upon new orders.",
    "Finance records accurately capture expenses, cash flow balances, and generate reliable profit & loss reports.",
    "Customer CRM segments customers based on loyalty points and tracks order history and birthdays correctly.",
    "Promotion codes enforce restriction rules on date ranges, usage limits, and applicable items with proper discount application.",
    "PWA features including offline caching and service worker registration work seamlessly with install prompts.",
    "Authentication enforces role-based UI access; PIN validation and session management maintain security.",
    "WhatsApp messaging functions send correct formatted messages for receipts, stock alerts, and summaries.",
    "Exported reports (PDF, Excel, CSV) reflect accurate and complete data for the relevant modules.",
    "Internationalization toggles between English and Bahasa Melayu with consistent translation coverage.",
    "Theme management allows smooth dark/light mode toggling with persisted preferences."
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "Next.js 14 (App Router)",
      "React 18",
      "Supabase (Auth & Database)",
      "Recharts (Data Visualization)",
      "Lucide React (Icons)",
      "date-fns (Date Handling)",
      "CSS Variables (Styling)",
      "PWA (Progressive Web App)",
      "LocalStorage (Offline Persistence)"
    ],
    "features": [
      {
        "name": "Dashboard",
        "description": "Main dashboard showing real-time sales summary, order counts, low stock alerts, staff attendance status, sales trend charts, and quick action buttons for navigation",
        "files": [
          "app/page.tsx",
          "components/StatCard.tsx",
          "components/ChartCard.tsx",
          "components/charts/SalesTrendChart.tsx",
          "components/charts/InventoryLevelChart.tsx",
          "components/charts/StaffAttendanceChart.tsx",
          "components/AIInsightsWidget.tsx"
        ]
      },
      {
        "name": "POS System",
        "description": "Point of Sale system with menu display, cart management, modifier selection, forced drink upselling, discount application (0-20%), order types (takeaway/GoMamam), phone validation (+673 Brunei format), receipt printing, and order queue management",
        "files": [
          "app/pos/page.tsx",
          "components/ReceiptPreview.tsx",
          "lib/types.ts",
          "lib/menu-data.ts",
          "lib/services/receipt-generator.ts",
          "lib/services/thermal-printer.ts"
        ]
      },
      {
        "name": "Menu Management",
        "description": "CRUD operations for menu items, category management, modifier group configuration with required/optional options, extra pricing for modifiers, and item availability toggle",
        "files": [
          "app/menu-management/page.tsx",
          "lib/menu-data.ts",
          "lib/types.ts"
        ]
      },
      {
        "name": "Kitchen Display System",
        "description": "Real-time order display for kitchen staff with status updates (pending → preparing → ready → completed), order timers, and audio notifications",
        "files": [
          "app/kds/page.tsx",
          "components/OrderTimer.tsx"
        ]
      },
      {
        "name": "Inventory Management",
        "description": "Stock item management with categories (Protein, Staple, Condiment, etc.), unit tracking, minimum quantity alerts, stock adjustments with reason logging, and supplier association",
        "files": [
          "app/inventory/page.tsx",
          "lib/inventory-data.ts",
          "lib/types.ts"
        ]
      },
      {
        "name": "HR Management",
        "description": "Staff profile management, attendance tracking with PIN and photo verification, KPI scoring system with tier rankings (S/A/B/C/D), payroll generation with TAP/SCP statutory deductions for Brunei, shift scheduling, and leave/claim approvals",
        "files": [
          "app/hr/page.tsx",
          "app/hr/staff/page.tsx",
          "app/hr/staff/new/page.tsx",
          "app/hr/timeclock/page.tsx",
          "app/hr/kpi/page.tsx",
          "app/hr/payroll/page.tsx",
          "app/hr/schedule/page.tsx",
          "app/hr/approvals/page.tsx",
          "app/hr/leave-calendar/page.tsx",
          "app/hr/checklist-config/page.tsx",
          "lib/hr-data.ts",
          "lib/kpi-data.ts"
        ]
      },
      {
        "name": "Staff Portal",
        "description": "Employee self-service portal with personal schedule viewing, opening/closing checklists with photo proof, leave application and balance tracking, expense claims submission, payslip viewing, profile management, training modules, and shift swap requests",
        "files": [
          "app/staff-portal/page.tsx",
          "app/staff-portal/schedule/page.tsx",
          "app/staff-portal/checklist/page.tsx",
          "app/staff-portal/leave/page.tsx",
          "app/staff-portal/leave/apply/page.tsx",
          "app/staff-portal/claims/page.tsx",
          "app/staff-portal/claims/new/page.tsx",
          "app/staff-portal/payslip/page.tsx",
          "app/staff-portal/profile/page.tsx",
          "app/staff-portal/training/page.tsx",
          "app/staff-portal/swap-shift/page.tsx",
          "components/staff-portal/EmergencySOS.tsx",
          "components/staff-portal/MoodCheckIn.tsx",
          "lib/staff-portal-data.ts"
        ]
      },
      {
        "name": "Delivery Hub",
        "description": "Multi-platform delivery order aggregation from Grab, FoodPanda, and Shopee with kanban-style order board, status progression, audio notifications, delivery slip printing, and driver information display",
        "files": [
          "app/delivery/page.tsx",
          "lib/delivery-data.ts"
        ]
      },
      {
        "name": "Finance Module",
        "description": "Expense tracking with categorization (rent, utilities, supplies, wages, etc.), daily cash flow management with opening/closing balances, and profit & loss report generation",
        "files": [
          "app/finance/page.tsx",
          "lib/finance-data.ts",
          "lib/types.ts"
        ]
      },
      {
        "name": "Customer CRM",
        "description": "Customer database with loyalty points system, customer segmentation (new/regular/VIP), order history tracking, and birthday tracking",
        "files": [
          "app/customers/page.tsx",
          "lib/types.ts"
        ]
      },
      {
        "name": "Promotions",
        "description": "Promo code creation with discount types (percentage, fixed, BOGO, free item), date range validity, usage limits, applicable item selection, and day/time restrictions",
        "files": [
          "app/promotions/page.tsx",
          "lib/types.ts"
        ]
      },
      {
        "name": "Production Module",
        "description": "Oil tracker for fryers with cycle counting, change date tracking, production logs, and waste tracking",
        "files": [
          "app/production/page.tsx",
          "lib/production-data.ts"
        ]
      },
      {
        "name": "Recipe Management",
        "description": "Recipe definitions with ingredient costing and profit margin calculations",
        "files": [
          "app/recipes/page.tsx",
          "lib/types.ts"
        ]
      },
      {
        "name": "Supplier Management",
        "description": "Supplier profiles and purchase order management",
        "files": [
          "app/suppliers/page.tsx",
          "lib/types.ts"
        ]
      },
      {
        "name": "Analytics",
        "description": "Business intelligence dashboards with sales analytics, performance metrics, and reporting",
        "files": [
          "app/analytics/page.tsx",
          "lib/sales-data.ts",
          "components/charts/PerformanceMatrix.tsx",
          "components/charts/ProfitMarginChart.tsx",
          "components/charts/TimeHeatmap.tsx"
        ]
      },
      {
        "name": "Audit Log",
        "description": "Records critical user actions for compliance and security tracking",
        "files": [
          "app/audit-log/page.tsx",
          "lib/audit-data.ts"
        ]
      },
      {
        "name": "Notifications",
        "description": "Notification center for alerts, announcements, and system messages",
        "files": [
          "app/notifications/page.tsx",
          "components/staff-portal/NotificationCenter.tsx"
        ]
      },
      {
        "name": "Settings",
        "description": "System configuration including receipt designer, business info, language settings, and theme customization",
        "files": [
          "app/settings/page.tsx",
          "components/ReceiptDesigner.tsx",
          "components/LogoUpload.tsx"
        ]
      },
      {
        "name": "Internationalization",
        "description": "Multi-language support with English and Bahasa Melayu translations",
        "files": [
          "lib/contexts/LanguageContext.tsx",
          "lib/i18n/en.json",
          "lib/i18n/ms.json"
        ]
      },
      {
        "name": "Theme Management",
        "description": "Dark/light mode toggle with persistence",
        "files": [
          "lib/contexts/ThemeContext.tsx",
          "components/staff-portal/DarkModeToggle.tsx"
        ]
      },
      {
        "name": "PWA Features",
        "description": "Progressive Web App with offline caching, service worker registration, and installability",
        "files": [
          "public/manifest.json",
          "public/sw.js",
          "components/ServiceWorkerRegistration.tsx",
          "components/OfflineIndicator.tsx"
        ]
      },
      {
        "name": "WhatsApp Integration",
        "description": "WhatsApp messaging for order receipts, order ready notifications, low stock alerts, and daily summaries",
        "files": [
          "lib/services/whatsapp.ts"
        ]
      },
      {
        "name": "Export Services",
        "description": "PDF report generation and Excel/CSV export for orders, inventory, attendance, and expenses",
        "files": [
          "lib/services/pdf-generator.ts",
          "lib/services/excel-export.ts"
        ]
      },
      {
        "name": "Authentication",
        "description": "PIN-based authentication for clock in/out and role-based access control (Manager/Staff)",
        "files": [
          "lib/contexts/AuthContext.tsx",
          "lib/supabase/auth.ts",
          "app/login/page.tsx"
        ]
      }
    ]
  }
}
